{"{\"assumptions\":{},\"sourceRoot\":\"/usr/local/google/home/nvitkov/.nvm/versions/node/v22.11.0/lib/node_modules/eslint-transforms/lib/v9-rule-migration/\",\"configFile\":false,\"babelrc\":false,\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/usr/local/google/home/nvitkov/devtools/devtools-frontend\",\"filename\":\"/usr/local/google/home/nvitkov/.nvm/versions/node/v22.11.0/lib/node_modules/eslint-transforms/lib/v9-rule-migration/v9-rule-migration.js\",\"targets\":{},\"cloneInputAst\":true,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/usr/local/google/home/nvitkov/devtools/devtools-frontend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-flow-strip-types\",\"visitor\":{\"Program\":{\"enter\":[null]},\"ImportDeclaration\":{\"enter\":[null,null]},\"ClassPrivateProperty\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"TypeCastExpression\":{\"enter\":[null,null]},\"CallExpression\":{\"enter\":[null]},\"OptionalCallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"ImportSpecifier\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"AnyTypeAnnotation\":{\"enter\":[null]},\"ArrayTypeAnnotation\":{\"enter\":[null]},\"BooleanTypeAnnotation\":{\"enter\":[null]},\"BooleanLiteralTypeAnnotation\":{\"enter\":[null]},\"NullLiteralTypeAnnotation\":{\"enter\":[null]},\"ClassImplements\":{\"enter\":[null]},\"DeclareClass\":{\"enter\":[null]},\"DeclareFunction\":{\"enter\":[null]},\"DeclareInterface\":{\"enter\":[null]},\"DeclareModule\":{\"enter\":[null]},\"DeclareModuleExports\":{\"enter\":[null]},\"DeclareTypeAlias\":{\"enter\":[null]},\"DeclareOpaqueType\":{\"enter\":[null]},\"DeclareVariable\":{\"enter\":[null]},\"DeclareExportDeclaration\":{\"enter\":[null]},\"DeclareExportAllDeclaration\":{\"enter\":[null]},\"DeclaredPredicate\":{\"enter\":[null]},\"ExistsTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeAnnotation\":{\"enter\":[null]},\"FunctionTypeParam\":{\"enter\":[null]},\"GenericTypeAnnotation\":{\"enter\":[null]},\"InferredPredicate\":{\"enter\":[null]},\"InterfaceExtends\":{\"enter\":[null]},\"InterfaceDeclaration\":{\"enter\":[null]},\"InterfaceTypeAnnotation\":{\"enter\":[null]},\"IntersectionTypeAnnotation\":{\"enter\":[null]},\"MixedTypeAnnotation\":{\"enter\":[null]},\"EmptyTypeAnnotation\":{\"enter\":[null]},\"NullableTypeAnnotation\":{\"enter\":[null]},\"NumberLiteralTypeAnnotation\":{\"enter\":[null]},\"NumberTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeAnnotation\":{\"enter\":[null]},\"ObjectTypeInternalSlot\":{\"enter\":[null]},\"ObjectTypeCallProperty\":{\"enter\":[null]},\"ObjectTypeIndexer\":{\"enter\":[null]},\"ObjectTypeProperty\":{\"enter\":[null]},\"ObjectTypeSpreadProperty\":{\"enter\":[null]},\"OpaqueType\":{\"enter\":[null]},\"QualifiedTypeIdentifier\":{\"enter\":[null]},\"StringLiteralTypeAnnotation\":{\"enter\":[null]},\"StringTypeAnnotation\":{\"enter\":[null]},\"SymbolTypeAnnotation\":{\"enter\":[null]},\"ThisTypeAnnotation\":{\"enter\":[null]},\"TupleTypeAnnotation\":{\"enter\":[null]},\"TypeofTypeAnnotation\":{\"enter\":[null]},\"TypeAlias\":{\"enter\":[null]},\"TypeAnnotation\":{\"enter\":[null]},\"TypeParameter\":{\"enter\":[null]},\"TypeParameterDeclaration\":{\"enter\":[null]},\"TypeParameterInstantiation\":{\"enter\":[null]},\"UnionTypeAnnotation\":{\"enter\":[null]},\"Variance\":{\"enter\":[null]},\"VoidTypeAnnotation\":{\"enter\":[null]},\"EnumDeclaration\":{\"enter\":[null]},\"EnumBooleanBody\":{\"enter\":[null]},\"EnumNumberBody\":{\"enter\":[null]},\"EnumStringBody\":{\"enter\":[null]},\"EnumSymbolBody\":{\"enter\":[null]},\"EnumBooleanMember\":{\"enter\":[null]},\"EnumNumberMember\":{\"enter\":[null]},\"EnumStringMember\":{\"enter\":[null]},\"EnumDefaultedMember\":{\"enter\":[null]},\"IndexedAccessType\":{\"enter\":[null]},\"OptionalIndexedAccessType\":{\"enter\":[null]},\"ExportAllDeclaration\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]}],\"presets\":[]}:7.26.0:development":{"value":{"code":"/**\n * @fileoverview Transform that migrates an ESLint API from v8 to v9\n * Refer to https://github.com/eslint/eslint-transforms/issues/25 for more information\n *\n * @author Nitin Kumar\n */\n\n\"use strict\";\n\n//------------------------------------------------------------------------------\n// Requirements\n//------------------------------------------------------------------------------\nconst path = require(\"path\");\n\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n\n/**\n * Formats a message string with ANSI escape codes to display it in yellow with bold styling in the terminal.\n * @param {string} message The message to be formatted.\n * @returns {string} The formatted message string.\n */\nfunction formatBoldYellow(message) {\n  return `\\u001b[1m\\u001b[33m${message}\\u001b[39m\\u001b[22m`;\n}\nconst contextMethodsToPropertyMapping = {\n  getSourceCode: \"sourceCode\",\n  getFilename: \"filename\",\n  getPhysicalFilename: \"physicalFilename\",\n  getCwd: \"cwd\"\n};\nconst contextToSourceCodeMapping = {\n  getScope: \"getScope\",\n  getAncestors: \"getAncestors\",\n  getDeclaredVariables: \"getDeclaredVariables\",\n  markVariableAsUsed: \"markVariableAsUsed\",\n  getSource: \"getText\",\n  getSourceLines: \"getLines\",\n  getAllComments: \"getAllComments\",\n  getNodeByRangeIndex: \"getNodeByRangeIndex\",\n  getComments: \"getComments\",\n  getCommentsBefore: \"getCommentsBefore\",\n  getCommentsAfter: \"getCommentsAfter\",\n  getCommentsInside: \"getCommentsInside\",\n  getJSDocComment: \"getJSDocComment\",\n  getFirstToken: \"getFirstToken\",\n  getFirstTokens: \"getFirstTokens\",\n  getLastToken: \"getLastToken\",\n  getLastTokens: \"getLastTokens\",\n  getTokenAfter: \"getTokenAfter\",\n  getTokenBefore: \"getTokenBefore\",\n  getTokenByRangeStart: \"getTokenByRangeStart\",\n  getTokens: \"getTokens\",\n  getTokensAfter: \"getTokensAfter\",\n  getTokensBefore: \"getTokensBefore\",\n  getTokensBetween: \"getTokensBetween\",\n  parserServices: \"parserServices\"\n};\nconst METHODS_WITH_SIGNATURE_CHANGE = new Set([\"getScope\", \"getAncestors\", \"markVariableAsUsed\", \"getDeclaredVariables\"]);\n\n/**\n * Returns the parent ObjectMethod node\n * @param {Node} nodePath The nodePath of the current node\n * @returns {Node} The parent ObjectMethod node\n */\nfunction getParentObjectMethod(nodePath) {\n  if (!nodePath) {\n    return null;\n  }\n  const node = nodePath.node;\n  if (node.type && node.type === \"Property\" && node.method) {\n    return node;\n  }\n  return getParentObjectMethod(nodePath.parentPath);\n}\n\n//------------------------------------------------------------------------------\n// Transform Definition\n//------------------------------------------------------------------------------\n\n/**\n * Transforms an ESLint rule from the old format to the new format.\n * @param {Object} fileInfo holds information about the currently processed file.\n * * @param {Object} api holds the jscodeshift API\n * @returns {string} the new source code, after being transformed.\n */\n\nmodule.exports = function (fileInfo, api) {\n  const j = api.jscodeshift;\n  const root = j(fileInfo.source);\n  const USED_CONTEXT_METHODS = new Set();\n\n  /**\n   * Adds a variable declaration for the context method immediately inside the create() method\n   * @param {string} methodName The name of the context method\n   * @param {Array} args The arguments to be passed to the context method\n   * @returns {void}\n   */\n  function addContextMethodVariableDeclaration(methodName, args = []) {\n    if (USED_CONTEXT_METHODS.has(methodName)) {\n      return;\n    }\n    root.find(j.Property, {\n      key: {\n        name: \"create\"\n      }\n    }).replaceWith(({\n      node: createNode\n    }) => {\n      const contextMethodDeclaration = j.variableDeclaration(\"const\", [j.variableDeclarator(j.identifier(contextMethodsToPropertyMapping[methodName]), j.logicalExpression(\"??\", j.memberExpression(j.identifier(\"context\"), j.identifier(contextMethodsToPropertyMapping[methodName])), j.callExpression(j.memberExpression(j.identifier(\"context\"), j.identifier(methodName)), [...args])))]);\n\n      // Insert the sourceCodeDeclaration at the beginning of the create() method\n      createNode.value.body.body.unshift(contextMethodDeclaration);\n      USED_CONTEXT_METHODS.add(methodName);\n      return createNode;\n    });\n  }\n\n  // Update context methods\n  // context.getSourceCode() -> context.sourceCode ?? context.getSourceCode()\n  root.find(j.CallExpression, {\n    callee: {\n      object: {\n        type: \"Identifier\",\n        name: \"context\"\n      },\n      property: {\n        type: \"Identifier\",\n        name: name => Object.keys(contextMethodsToPropertyMapping).includes(name)\n      }\n    }\n  }).replaceWith(({\n    node\n  }) => {\n    const method = node.callee.property.name;\n    const args = node.arguments;\n    addContextMethodVariableDeclaration(method, args);\n\n    // If the method is already declared as a variable in the create() method\n    // Replace all instances of context methods with corresponding variable\n    if (USED_CONTEXT_METHODS.has(method)) {\n      return j.identifier(contextMethodsToPropertyMapping[method]);\n    }\n\n    // Otherwise, create a variable declaration for the method\n    return j.logicalExpression(\"??\", j.memberExpression(j.identifier(\"context\"), j.identifier(contextMethodsToPropertyMapping[method])), j.callExpression(j.memberExpression(j.identifier(\"context\"), j.identifier(method)), args));\n  });\n\n  // Remove the variable declarations which have value same as the declaration\n  // const sourceCode = sourceCode -> Remove\n  root.find(j.VariableDeclaration, {\n    declarations: [{\n      type: \"VariableDeclarator\",\n      id: {\n        type: \"Identifier\",\n        name: name => Object.values(contextMethodsToPropertyMapping).includes(name)\n      },\n      init: {\n        type: \"Identifier\"\n      }\n    }]\n  }).filter(({\n    node\n  }) => node.declarations[0].id.name === node.declarations[0].init.name).remove();\n\n  // Move context methods to SourceCode\n  // context.getSource() -> sourceCode.getText()\n  root.find(j.CallExpression, {\n    callee: {\n      type: \"MemberExpression\",\n      object: {\n        type: \"Identifier\",\n        name: \"context\"\n      },\n      property: {\n        type: \"Identifier\",\n        name: name => Object.keys(contextToSourceCodeMapping).includes(name)\n      }\n    }\n  }).replaceWith(nodePath => {\n    const node = nodePath.node;\n    const method = node.callee.property.name;\n    const args = node.arguments;\n    if (method === \"getComments\") {\n      // eslint-disable-next-line no-console -- This is an intentional warning message\n      console.warn(formatBoldYellow(`${path.relative(process.cwd(), fileInfo.path)}:${node.loc.start.line}:${node.loc.start.column} The \"getComments()\" method has been removed. Please use \"getCommentsBefore()\", \"getCommentsAfter()\", or \"getCommentsInside()\" instead. https://eslint.org/docs/latest/use/migrate-to-9.0.0#-removed-sourcecodegetcomments`));\n      return node;\n    }\n\n    // Add variable declaration for the method if not already added\n    addContextMethodVariableDeclaration(\"getSourceCode\");\n    if (METHODS_WITH_SIGNATURE_CHANGE.has(method)) {\n      const parentObjectMethodNode = getParentObjectMethod(nodePath);\n      const parentObjectMethodParamName = parentObjectMethodNode && parentObjectMethodNode.value.params[0].name;\n\n      // Return the node as is if the method is called with an argument\n      // context.getScope(node) -> sourceCode.getScope  ? sourceCode.getScope(node) : context.getScope();\n      return j.conditionalExpression(j.memberExpression(j.identifier(\"sourceCode\"), j.identifier(contextToSourceCodeMapping[method])), j.callExpression(j.memberExpression(j.identifier(\"sourceCode\"), j.identifier(contextToSourceCodeMapping[method])), parentObjectMethodParamName ? [...args, j.identifier(parentObjectMethodParamName)] : args), j.callExpression(j.memberExpression(j.identifier(\"context\"), j.identifier(method)), []));\n    }\n    node.callee.property.name = contextToSourceCodeMapping[method];\n    node.callee.object.name = \"sourceCode\";\n    return node;\n  });\n\n  // Migrate context.parserServices to sourceCode.parserServices\n  root.find(j.MemberExpression, {\n    object: {\n      type: \"Identifier\",\n      name: \"context\"\n    },\n    property: {\n      type: \"Identifier\",\n      name: \"parserServices\"\n    }\n  }).replaceWith(({\n    node\n  }) => {\n    node.object.name = \"sourceCode\";\n    return node;\n  });\n\n  // Warn for codePath.currentSegments\n  root.find(j.Property, {\n    key: {\n      type: \"Identifier\",\n      name: name => name === \"onCodePathStart\" || name === \"onCodePathEnd\"\n    }\n  }).find(j.MemberExpression, {\n    property: {\n      type: \"Identifier\",\n      name: \"currentSegments\"\n    }\n  }).forEach(({\n    node\n  }) => {\n    // eslint-disable-next-line no-console -- This is an intentional warning message\n    console.warn(formatBoldYellow(`${path.relative(process.cwd(), fileInfo.path)}:${node.loc.start.line}:${node.loc.start.column} The \"CodePath#currentSegments\" property has been removed and it can't be migrated automatically.\\nPlease read https://eslint.org/blog/2023/09/preparing-custom-rules-eslint-v9/#codepath%23currentsegments for more information.\\n`));\n  });\n  return root.toSource();\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXRoIiwicmVxdWlyZSIsImZvcm1hdEJvbGRZZWxsb3ciLCJtZXNzYWdlIiwiY29udGV4dE1ldGhvZHNUb1Byb3BlcnR5TWFwcGluZyIsImdldFNvdXJjZUNvZGUiLCJnZXRGaWxlbmFtZSIsImdldFBoeXNpY2FsRmlsZW5hbWUiLCJnZXRDd2QiLCJjb250ZXh0VG9Tb3VyY2VDb2RlTWFwcGluZyIsImdldFNjb3BlIiwiZ2V0QW5jZXN0b3JzIiwiZ2V0RGVjbGFyZWRWYXJpYWJsZXMiLCJtYXJrVmFyaWFibGVBc1VzZWQiLCJnZXRTb3VyY2UiLCJnZXRTb3VyY2VMaW5lcyIsImdldEFsbENvbW1lbnRzIiwiZ2V0Tm9kZUJ5UmFuZ2VJbmRleCIsImdldENvbW1lbnRzIiwiZ2V0Q29tbWVudHNCZWZvcmUiLCJnZXRDb21tZW50c0FmdGVyIiwiZ2V0Q29tbWVudHNJbnNpZGUiLCJnZXRKU0RvY0NvbW1lbnQiLCJnZXRGaXJzdFRva2VuIiwiZ2V0Rmlyc3RUb2tlbnMiLCJnZXRMYXN0VG9rZW4iLCJnZXRMYXN0VG9rZW5zIiwiZ2V0VG9rZW5BZnRlciIsImdldFRva2VuQmVmb3JlIiwiZ2V0VG9rZW5CeVJhbmdlU3RhcnQiLCJnZXRUb2tlbnMiLCJnZXRUb2tlbnNBZnRlciIsImdldFRva2Vuc0JlZm9yZSIsImdldFRva2Vuc0JldHdlZW4iLCJwYXJzZXJTZXJ2aWNlcyIsIk1FVEhPRFNfV0lUSF9TSUdOQVRVUkVfQ0hBTkdFIiwiU2V0IiwiZ2V0UGFyZW50T2JqZWN0TWV0aG9kIiwibm9kZVBhdGgiLCJub2RlIiwidHlwZSIsIm1ldGhvZCIsInBhcmVudFBhdGgiLCJtb2R1bGUiLCJleHBvcnRzIiwiZmlsZUluZm8iLCJhcGkiLCJqIiwianNjb2Rlc2hpZnQiLCJyb290Iiwic291cmNlIiwiVVNFRF9DT05URVhUX01FVEhPRFMiLCJhZGRDb250ZXh0TWV0aG9kVmFyaWFibGVEZWNsYXJhdGlvbiIsIm1ldGhvZE5hbWUiLCJhcmdzIiwiaGFzIiwiZmluZCIsIlByb3BlcnR5Iiwia2V5IiwibmFtZSIsInJlcGxhY2VXaXRoIiwiY3JlYXRlTm9kZSIsImNvbnRleHRNZXRob2REZWNsYXJhdGlvbiIsInZhcmlhYmxlRGVjbGFyYXRpb24iLCJ2YXJpYWJsZURlY2xhcmF0b3IiLCJpZGVudGlmaWVyIiwibG9naWNhbEV4cHJlc3Npb24iLCJtZW1iZXJFeHByZXNzaW9uIiwiY2FsbEV4cHJlc3Npb24iLCJ2YWx1ZSIsImJvZHkiLCJ1bnNoaWZ0IiwiYWRkIiwiQ2FsbEV4cHJlc3Npb24iLCJjYWxsZWUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsIk9iamVjdCIsImtleXMiLCJpbmNsdWRlcyIsImFyZ3VtZW50cyIsIlZhcmlhYmxlRGVjbGFyYXRpb24iLCJkZWNsYXJhdGlvbnMiLCJpZCIsInZhbHVlcyIsImluaXQiLCJmaWx0ZXIiLCJyZW1vdmUiLCJjb25zb2xlIiwid2FybiIsInJlbGF0aXZlIiwicHJvY2VzcyIsImN3ZCIsImxvYyIsInN0YXJ0IiwibGluZSIsImNvbHVtbiIsInBhcmVudE9iamVjdE1ldGhvZE5vZGUiLCJwYXJlbnRPYmplY3RNZXRob2RQYXJhbU5hbWUiLCJwYXJhbXMiLCJjb25kaXRpb25hbEV4cHJlc3Npb24iLCJNZW1iZXJFeHByZXNzaW9uIiwiZm9yRWFjaCIsInRvU291cmNlIl0sInNvdXJjZVJvb3QiOiIvdXNyL2xvY2FsL2dvb2dsZS9ob21lL252aXRrb3YvLm52bS92ZXJzaW9ucy9ub2RlL3YyMi4xMS4wL2xpYi9ub2RlX21vZHVsZXMvZXNsaW50LXRyYW5zZm9ybXMvbGliL3Y5LXJ1bGUtbWlncmF0aW9uLyIsInNvdXJjZXMiOlsidjktcnVsZS1taWdyYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFRyYW5zZm9ybSB0aGF0IG1pZ3JhdGVzIGFuIEVTTGludCBBUEkgZnJvbSB2OCB0byB2OVxuICogUmVmZXIgdG8gaHR0cHM6Ly9naXRodWIuY29tL2VzbGludC9lc2xpbnQtdHJhbnNmb3Jtcy9pc3N1ZXMvMjUgZm9yIG1vcmUgaW5mb3JtYXRpb25cbiAqXG4gKiBAYXV0aG9yIE5pdGluIEt1bWFyXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBSZXF1aXJlbWVudHNcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBIZWxwZXJzXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIEZvcm1hdHMgYSBtZXNzYWdlIHN0cmluZyB3aXRoIEFOU0kgZXNjYXBlIGNvZGVzIHRvIGRpc3BsYXkgaXQgaW4geWVsbG93IHdpdGggYm9sZCBzdHlsaW5nIGluIHRoZSB0ZXJtaW5hbC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIGJlIGZvcm1hdHRlZC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgbWVzc2FnZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdEJvbGRZZWxsb3cobWVzc2FnZSkge1xuICAgIHJldHVybiBgXFx1MDAxYlsxbVxcdTAwMWJbMzNtJHttZXNzYWdlfVxcdTAwMWJbMzltXFx1MDAxYlsyMm1gO1xufVxuXG5jb25zdCBjb250ZXh0TWV0aG9kc1RvUHJvcGVydHlNYXBwaW5nID0ge1xuICAgIGdldFNvdXJjZUNvZGU6IFwic291cmNlQ29kZVwiLFxuICAgIGdldEZpbGVuYW1lOiBcImZpbGVuYW1lXCIsXG4gICAgZ2V0UGh5c2ljYWxGaWxlbmFtZTogXCJwaHlzaWNhbEZpbGVuYW1lXCIsXG4gICAgZ2V0Q3dkOiBcImN3ZFwiXG59O1xuXG5jb25zdCBjb250ZXh0VG9Tb3VyY2VDb2RlTWFwcGluZyA9IHtcbiAgICBnZXRTY29wZTogXCJnZXRTY29wZVwiLFxuICAgIGdldEFuY2VzdG9yczogXCJnZXRBbmNlc3RvcnNcIixcbiAgICBnZXREZWNsYXJlZFZhcmlhYmxlczogXCJnZXREZWNsYXJlZFZhcmlhYmxlc1wiLFxuICAgIG1hcmtWYXJpYWJsZUFzVXNlZDogXCJtYXJrVmFyaWFibGVBc1VzZWRcIixcbiAgICBnZXRTb3VyY2U6IFwiZ2V0VGV4dFwiLFxuICAgIGdldFNvdXJjZUxpbmVzOiBcImdldExpbmVzXCIsXG4gICAgZ2V0QWxsQ29tbWVudHM6IFwiZ2V0QWxsQ29tbWVudHNcIixcbiAgICBnZXROb2RlQnlSYW5nZUluZGV4OiBcImdldE5vZGVCeVJhbmdlSW5kZXhcIixcbiAgICBnZXRDb21tZW50czogXCJnZXRDb21tZW50c1wiLFxuICAgIGdldENvbW1lbnRzQmVmb3JlOiBcImdldENvbW1lbnRzQmVmb3JlXCIsXG4gICAgZ2V0Q29tbWVudHNBZnRlcjogXCJnZXRDb21tZW50c0FmdGVyXCIsXG4gICAgZ2V0Q29tbWVudHNJbnNpZGU6IFwiZ2V0Q29tbWVudHNJbnNpZGVcIixcbiAgICBnZXRKU0RvY0NvbW1lbnQ6IFwiZ2V0SlNEb2NDb21tZW50XCIsXG4gICAgZ2V0Rmlyc3RUb2tlbjogXCJnZXRGaXJzdFRva2VuXCIsXG4gICAgZ2V0Rmlyc3RUb2tlbnM6IFwiZ2V0Rmlyc3RUb2tlbnNcIixcbiAgICBnZXRMYXN0VG9rZW46IFwiZ2V0TGFzdFRva2VuXCIsXG4gICAgZ2V0TGFzdFRva2VuczogXCJnZXRMYXN0VG9rZW5zXCIsXG4gICAgZ2V0VG9rZW5BZnRlcjogXCJnZXRUb2tlbkFmdGVyXCIsXG4gICAgZ2V0VG9rZW5CZWZvcmU6IFwiZ2V0VG9rZW5CZWZvcmVcIixcbiAgICBnZXRUb2tlbkJ5UmFuZ2VTdGFydDogXCJnZXRUb2tlbkJ5UmFuZ2VTdGFydFwiLFxuICAgIGdldFRva2VuczogXCJnZXRUb2tlbnNcIixcbiAgICBnZXRUb2tlbnNBZnRlcjogXCJnZXRUb2tlbnNBZnRlclwiLFxuICAgIGdldFRva2Vuc0JlZm9yZTogXCJnZXRUb2tlbnNCZWZvcmVcIixcbiAgICBnZXRUb2tlbnNCZXR3ZWVuOiBcImdldFRva2Vuc0JldHdlZW5cIixcbiAgICBwYXJzZXJTZXJ2aWNlczogXCJwYXJzZXJTZXJ2aWNlc1wiXG59O1xuXG5jb25zdCBNRVRIT0RTX1dJVEhfU0lHTkFUVVJFX0NIQU5HRSA9IG5ldyBTZXQoW1xuICAgIFwiZ2V0U2NvcGVcIixcbiAgICBcImdldEFuY2VzdG9yc1wiLFxuICAgIFwibWFya1ZhcmlhYmxlQXNVc2VkXCIsXG4gICAgXCJnZXREZWNsYXJlZFZhcmlhYmxlc1wiXG5dKTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwYXJlbnQgT2JqZWN0TWV0aG9kIG5vZGVcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVBhdGggVGhlIG5vZGVQYXRoIG9mIHRoZSBjdXJyZW50IG5vZGVcbiAqIEByZXR1cm5zIHtOb2RlfSBUaGUgcGFyZW50IE9iamVjdE1ldGhvZCBub2RlXG4gKi9cbmZ1bmN0aW9uIGdldFBhcmVudE9iamVjdE1ldGhvZChub2RlUGF0aCkge1xuICAgIGlmICghbm9kZVBhdGgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9kZSA9IG5vZGVQYXRoLm5vZGU7XG5cbiAgICBpZiAobm9kZS50eXBlICYmIG5vZGUudHlwZSA9PT0gXCJQcm9wZXJ0eVwiICYmIG5vZGUubWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRQYXJlbnRPYmplY3RNZXRob2Qobm9kZVBhdGgucGFyZW50UGF0aCk7XG59XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUcmFuc2Zvcm0gRGVmaW5pdGlvblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIEVTTGludCBydWxlIGZyb20gdGhlIG9sZCBmb3JtYXQgdG8gdGhlIG5ldyBmb3JtYXQuXG4gKiBAcGFyYW0ge09iamVjdH0gZmlsZUluZm8gaG9sZHMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnRseSBwcm9jZXNzZWQgZmlsZS5cbiAqICogQHBhcmFtIHtPYmplY3R9IGFwaSBob2xkcyB0aGUganNjb2Rlc2hpZnQgQVBJXG4gKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgbmV3IHNvdXJjZSBjb2RlLCBhZnRlciBiZWluZyB0cmFuc2Zvcm1lZC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZpbGVJbmZvLCBhcGkpIHtcbiAgICBjb25zdCBqID0gYXBpLmpzY29kZXNoaWZ0O1xuICAgIGNvbnN0IHJvb3QgPSBqKGZpbGVJbmZvLnNvdXJjZSk7XG4gICAgY29uc3QgVVNFRF9DT05URVhUX01FVEhPRFMgPSBuZXcgU2V0KCk7XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgdmFyaWFibGUgZGVjbGFyYXRpb24gZm9yIHRoZSBjb250ZXh0IG1ldGhvZCBpbW1lZGlhdGVseSBpbnNpZGUgdGhlIGNyZWF0ZSgpIG1ldGhvZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lIFRoZSBuYW1lIG9mIHRoZSBjb250ZXh0IG1ldGhvZFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgdG8gdGhlIGNvbnRleHQgbWV0aG9kXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkQ29udGV4dE1ldGhvZFZhcmlhYmxlRGVjbGFyYXRpb24obWV0aG9kTmFtZSwgYXJncyA9IFtdKSB7XG4gICAgICAgIGlmIChVU0VEX0NPTlRFWFRfTUVUSE9EUy5oYXMobWV0aG9kTmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJvb3QuZmluZChqLlByb3BlcnR5LCB7XG4gICAgICAgICAgICBrZXk6IHsgbmFtZTogXCJjcmVhdGVcIiB9XG4gICAgICAgIH0pLnJlcGxhY2VXaXRoKCh7IG5vZGU6IGNyZWF0ZU5vZGUgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29udGV4dE1ldGhvZERlY2xhcmF0aW9uID0gai52YXJpYWJsZURlY2xhcmF0aW9uKFwiY29uc3RcIiwgW1xuICAgICAgICAgICAgICAgIGoudmFyaWFibGVEZWNsYXJhdG9yKFxuICAgICAgICAgICAgICAgICAgICBqLmlkZW50aWZpZXIoY29udGV4dE1ldGhvZHNUb1Byb3BlcnR5TWFwcGluZ1ttZXRob2ROYW1lXSksXG4gICAgICAgICAgICAgICAgICAgIGoubG9naWNhbEV4cHJlc3Npb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBcIj8/XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBqLm1lbWJlckV4cHJlc3Npb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgai5pZGVudGlmaWVyKFwiY29udGV4dFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqLmlkZW50aWZpZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRNZXRob2RzVG9Qcm9wZXJ0eU1hcHBpbmdbbWV0aG9kTmFtZV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgai5jYWxsRXhwcmVzc2lvbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqLm1lbWJlckV4cHJlc3Npb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGouaWRlbnRpZmllcihcImNvbnRleHRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGouaWRlbnRpZmllcihtZXRob2ROYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWy4uLmFyZ3NdXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBzb3VyY2VDb2RlRGVjbGFyYXRpb24gYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgY3JlYXRlKCkgbWV0aG9kXG4gICAgICAgICAgICBjcmVhdGVOb2RlLnZhbHVlLmJvZHkuYm9keS51bnNoaWZ0KGNvbnRleHRNZXRob2REZWNsYXJhdGlvbik7XG4gICAgICAgICAgICBVU0VEX0NPTlRFWFRfTUVUSE9EUy5hZGQobWV0aG9kTmFtZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOb2RlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgY29udGV4dCBtZXRob2RzXG4gICAgLy8gY29udGV4dC5nZXRTb3VyY2VDb2RlKCkgLT4gY29udGV4dC5zb3VyY2VDb2RlID8/IGNvbnRleHQuZ2V0U291cmNlQ29kZSgpXG4gICAgcm9vdC5maW5kKGouQ2FsbEV4cHJlc3Npb24sIHtcbiAgICAgICAgY2FsbGVlOiB7XG4gICAgICAgICAgICBvYmplY3Q6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIklkZW50aWZpZXJcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNvbnRleHRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3BlcnR5OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJJZGVudGlmaWVyXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogbmFtZSA9PlxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjb250ZXh0TWV0aG9kc1RvUHJvcGVydHlNYXBwaW5nKS5pbmNsdWRlcyhuYW1lKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSkucmVwbGFjZVdpdGgoKHsgbm9kZSB9KSA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IG5vZGUuY2FsbGVlLnByb3BlcnR5Lm5hbWU7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBub2RlLmFyZ3VtZW50cztcblxuICAgICAgICBhZGRDb250ZXh0TWV0aG9kVmFyaWFibGVEZWNsYXJhdGlvbihtZXRob2QsIGFyZ3MpO1xuXG4gICAgICAgIC8vIElmIHRoZSBtZXRob2QgaXMgYWxyZWFkeSBkZWNsYXJlZCBhcyBhIHZhcmlhYmxlIGluIHRoZSBjcmVhdGUoKSBtZXRob2RcbiAgICAgICAgLy8gUmVwbGFjZSBhbGwgaW5zdGFuY2VzIG9mIGNvbnRleHQgbWV0aG9kcyB3aXRoIGNvcnJlc3BvbmRpbmcgdmFyaWFibGVcbiAgICAgICAgaWYgKFVTRURfQ09OVEVYVF9NRVRIT0RTLmhhcyhtZXRob2QpKSB7XG4gICAgICAgICAgICByZXR1cm4gai5pZGVudGlmaWVyKGNvbnRleHRNZXRob2RzVG9Qcm9wZXJ0eU1hcHBpbmdbbWV0aG9kXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPdGhlcndpc2UsIGNyZWF0ZSBhIHZhcmlhYmxlIGRlY2xhcmF0aW9uIGZvciB0aGUgbWV0aG9kXG4gICAgICAgIHJldHVybiBqLmxvZ2ljYWxFeHByZXNzaW9uKFxuICAgICAgICAgICAgXCI/P1wiLFxuICAgICAgICAgICAgai5tZW1iZXJFeHByZXNzaW9uKFxuICAgICAgICAgICAgICAgIGouaWRlbnRpZmllcihcImNvbnRleHRcIiksXG4gICAgICAgICAgICAgICAgai5pZGVudGlmaWVyKGNvbnRleHRNZXRob2RzVG9Qcm9wZXJ0eU1hcHBpbmdbbWV0aG9kXSlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBqLmNhbGxFeHByZXNzaW9uKFxuICAgICAgICAgICAgICAgIGoubWVtYmVyRXhwcmVzc2lvbihcbiAgICAgICAgICAgICAgICAgICAgai5pZGVudGlmaWVyKFwiY29udGV4dFwiKSxcbiAgICAgICAgICAgICAgICAgICAgai5pZGVudGlmaWVyKG1ldGhvZClcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGFyZ3NcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9KTtcblxuICAgIC8vIFJlbW92ZSB0aGUgdmFyaWFibGUgZGVjbGFyYXRpb25zIHdoaWNoIGhhdmUgdmFsdWUgc2FtZSBhcyB0aGUgZGVjbGFyYXRpb25cbiAgICAvLyBjb25zdCBzb3VyY2VDb2RlID0gc291cmNlQ29kZSAtPiBSZW1vdmVcbiAgICByb290LmZpbmQoai5WYXJpYWJsZURlY2xhcmF0aW9uLCB7XG4gICAgICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiVmFyaWFibGVEZWNsYXJhdG9yXCIsXG4gICAgICAgICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJJZGVudGlmaWVyXCIsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoY29udGV4dE1ldGhvZHNUb1Byb3BlcnR5TWFwcGluZykuaW5jbHVkZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5pdDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIklkZW50aWZpZXJcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgIH0pXG4gICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAoeyBub2RlIH0pID0+XG4gICAgICAgICAgICAgICAgbm9kZS5kZWNsYXJhdGlvbnNbMF0uaWQubmFtZSA9PT0gbm9kZS5kZWNsYXJhdGlvbnNbMF0uaW5pdC5uYW1lXG4gICAgICAgIClcbiAgICAgICAgLnJlbW92ZSgpO1xuXG4gICAgLy8gTW92ZSBjb250ZXh0IG1ldGhvZHMgdG8gU291cmNlQ29kZVxuICAgIC8vIGNvbnRleHQuZ2V0U291cmNlKCkgLT4gc291cmNlQ29kZS5nZXRUZXh0KClcbiAgICByb290LmZpbmQoai5DYWxsRXhwcmVzc2lvbiwge1xuICAgICAgICBjYWxsZWU6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiTWVtYmVyRXhwcmVzc2lvblwiLFxuICAgICAgICAgICAgb2JqZWN0OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJJZGVudGlmaWVyXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJjb250ZXh0XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9wZXJ0eToge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiSWRlbnRpZmllclwiLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUgPT5cbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoY29udGV4dFRvU291cmNlQ29kZU1hcHBpbmcpLmluY2x1ZGVzKG5hbWUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KS5yZXBsYWNlV2l0aChub2RlUGF0aCA9PiB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBub2RlUGF0aC5ub2RlO1xuICAgICAgICBjb25zdCBtZXRob2QgPSBub2RlLmNhbGxlZS5wcm9wZXJ0eS5uYW1lO1xuICAgICAgICBjb25zdCBhcmdzID0gbm9kZS5hcmd1bWVudHM7XG5cbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJnZXRDb21tZW50c1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZSAtLSBUaGlzIGlzIGFuIGludGVudGlvbmFsIHdhcm5pbmcgbWVzc2FnZVxuICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgIGZvcm1hdEJvbGRZZWxsb3coXG4gICAgICAgICAgICAgICAgICAgIGAke3BhdGgucmVsYXRpdmUocHJvY2Vzcy5jd2QoKSwgZmlsZUluZm8ucGF0aCl9OiR7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmxvYy5zdGFydC5saW5lXG4gICAgICAgICAgICAgICAgICAgIH06JHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubG9jLnN0YXJ0LmNvbHVtblxuICAgICAgICAgICAgICAgICAgICB9IFRoZSBcImdldENvbW1lbnRzKClcIiBtZXRob2QgaGFzIGJlZW4gcmVtb3ZlZC4gUGxlYXNlIHVzZSBcImdldENvbW1lbnRzQmVmb3JlKClcIiwgXCJnZXRDb21tZW50c0FmdGVyKClcIiwgb3IgXCJnZXRDb21tZW50c0luc2lkZSgpXCIgaW5zdGVhZC4gaHR0cHM6Ly9lc2xpbnQub3JnL2RvY3MvbGF0ZXN0L3VzZS9taWdyYXRlLXRvLTkuMC4wIy1yZW1vdmVkLXNvdXJjZWNvZGVnZXRjb21tZW50c2BcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgdmFyaWFibGUgZGVjbGFyYXRpb24gZm9yIHRoZSBtZXRob2QgaWYgbm90IGFscmVhZHkgYWRkZWRcbiAgICAgICAgYWRkQ29udGV4dE1ldGhvZFZhcmlhYmxlRGVjbGFyYXRpb24oXCJnZXRTb3VyY2VDb2RlXCIpO1xuXG4gICAgICAgIGlmIChNRVRIT0RTX1dJVEhfU0lHTkFUVVJFX0NIQU5HRS5oYXMobWV0aG9kKSkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50T2JqZWN0TWV0aG9kTm9kZSA9IGdldFBhcmVudE9iamVjdE1ldGhvZChub2RlUGF0aCk7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRPYmplY3RNZXRob2RQYXJhbU5hbWUgPVxuICAgICAgICAgICAgICAgIHBhcmVudE9iamVjdE1ldGhvZE5vZGUgJiZcbiAgICAgICAgICAgICAgICBwYXJlbnRPYmplY3RNZXRob2ROb2RlLnZhbHVlLnBhcmFtc1swXS5uYW1lO1xuXG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIG5vZGUgYXMgaXMgaWYgdGhlIG1ldGhvZCBpcyBjYWxsZWQgd2l0aCBhbiBhcmd1bWVudFxuICAgICAgICAgICAgLy8gY29udGV4dC5nZXRTY29wZShub2RlKSAtPiBzb3VyY2VDb2RlLmdldFNjb3BlICA/IHNvdXJjZUNvZGUuZ2V0U2NvcGUobm9kZSkgOiBjb250ZXh0LmdldFNjb3BlKCk7XG4gICAgICAgICAgICByZXR1cm4gai5jb25kaXRpb25hbEV4cHJlc3Npb24oXG4gICAgICAgICAgICAgICAgai5tZW1iZXJFeHByZXNzaW9uKFxuICAgICAgICAgICAgICAgICAgICBqLmlkZW50aWZpZXIoXCJzb3VyY2VDb2RlXCIpLFxuICAgICAgICAgICAgICAgICAgICBqLmlkZW50aWZpZXIoY29udGV4dFRvU291cmNlQ29kZU1hcHBpbmdbbWV0aG9kXSlcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGouY2FsbEV4cHJlc3Npb24oXG4gICAgICAgICAgICAgICAgICAgIGoubWVtYmVyRXhwcmVzc2lvbihcbiAgICAgICAgICAgICAgICAgICAgICAgIGouaWRlbnRpZmllcihcInNvdXJjZUNvZGVcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBqLmlkZW50aWZpZXIoY29udGV4dFRvU291cmNlQ29kZU1hcHBpbmdbbWV0aG9kXSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50T2JqZWN0TWV0aG9kUGFyYW1OYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFsuLi5hcmdzLCBqLmlkZW50aWZpZXIocGFyZW50T2JqZWN0TWV0aG9kUGFyYW1OYW1lKV1cbiAgICAgICAgICAgICAgICAgICAgICAgIDogYXJnc1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgai5jYWxsRXhwcmVzc2lvbihcbiAgICAgICAgICAgICAgICAgICAgai5tZW1iZXJFeHByZXNzaW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgai5pZGVudGlmaWVyKFwiY29udGV4dFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGouaWRlbnRpZmllcihtZXRob2QpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIFtdXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG5vZGUuY2FsbGVlLnByb3BlcnR5Lm5hbWUgPSBjb250ZXh0VG9Tb3VyY2VDb2RlTWFwcGluZ1ttZXRob2RdO1xuICAgICAgICBub2RlLmNhbGxlZS5vYmplY3QubmFtZSA9IFwic291cmNlQ29kZVwiO1xuXG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH0pO1xuXG4gICAgLy8gTWlncmF0ZSBjb250ZXh0LnBhcnNlclNlcnZpY2VzIHRvIHNvdXJjZUNvZGUucGFyc2VyU2VydmljZXNcbiAgICByb290LmZpbmQoai5NZW1iZXJFeHByZXNzaW9uLCB7XG4gICAgICAgIG9iamVjdDoge1xuICAgICAgICAgICAgdHlwZTogXCJJZGVudGlmaWVyXCIsXG4gICAgICAgICAgICBuYW1lOiBcImNvbnRleHRcIlxuICAgICAgICB9LFxuICAgICAgICBwcm9wZXJ0eToge1xuICAgICAgICAgICAgdHlwZTogXCJJZGVudGlmaWVyXCIsXG4gICAgICAgICAgICBuYW1lOiBcInBhcnNlclNlcnZpY2VzXCJcbiAgICAgICAgfVxuICAgIH0pLnJlcGxhY2VXaXRoKCh7IG5vZGUgfSkgPT4ge1xuICAgICAgICBub2RlLm9iamVjdC5uYW1lID0gXCJzb3VyY2VDb2RlXCI7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH0pO1xuXG4gICAgLy8gV2FybiBmb3IgY29kZVBhdGguY3VycmVudFNlZ21lbnRzXG4gICAgcm9vdC5maW5kKGouUHJvcGVydHksIHtcbiAgICAgICAga2V5OiB7XG4gICAgICAgICAgICB0eXBlOiBcIklkZW50aWZpZXJcIixcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPT5cbiAgICAgICAgICAgICAgICBuYW1lID09PSBcIm9uQ29kZVBhdGhTdGFydFwiIHx8IG5hbWUgPT09IFwib25Db2RlUGF0aEVuZFwiXG4gICAgICAgIH1cbiAgICB9KVxuICAgICAgICAuZmluZChqLk1lbWJlckV4cHJlc3Npb24sIHtcbiAgICAgICAgICAgIHByb3BlcnR5OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJJZGVudGlmaWVyXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJjdXJyZW50U2VnbWVudHNcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZm9yRWFjaCgoeyBub2RlIH0pID0+IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlIC0tIFRoaXMgaXMgYW4gaW50ZW50aW9uYWwgd2FybmluZyBtZXNzYWdlXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgZm9ybWF0Qm9sZFllbGxvdyhcbiAgICAgICAgICAgICAgICAgICAgYCR7cGF0aC5yZWxhdGl2ZShwcm9jZXNzLmN3ZCgpLCBmaWxlSW5mby5wYXRoKX06JHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUubG9jLnN0YXJ0LmxpbmVcbiAgICAgICAgICAgICAgICAgICAgfToke1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5sb2Muc3RhcnQuY29sdW1uXG4gICAgICAgICAgICAgICAgICAgIH0gVGhlIFwiQ29kZVBhdGgjY3VycmVudFNlZ21lbnRzXCIgcHJvcGVydHkgaGFzIGJlZW4gcmVtb3ZlZCBhbmQgaXQgY2FuJ3QgYmUgbWlncmF0ZWQgYXV0b21hdGljYWxseS5cXG5QbGVhc2UgcmVhZCBodHRwczovL2VzbGludC5vcmcvYmxvZy8yMDIzLzA5L3ByZXBhcmluZy1jdXN0b20tcnVsZXMtZXNsaW50LXY5LyNjb2RlcGF0aCUyM2N1cnJlbnRzZWdtZW50cyBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cXG5gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG5cbiAgICByZXR1cm4gcm9vdC50b1NvdXJjZSgpO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFlBQVk7O0FBRVo7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsTUFBTSxDQUFDOztBQUU1QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVNDLGdCQUFnQkEsQ0FBQ0MsT0FBTyxFQUFFO0VBQy9CLE9BQU8sc0JBQXNCQSxPQUFPLHNCQUFzQjtBQUM5RDtBQUVBLE1BQU1DLCtCQUErQixHQUFHO0VBQ3BDQyxhQUFhLEVBQUUsWUFBWTtFQUMzQkMsV0FBVyxFQUFFLFVBQVU7RUFDdkJDLG1CQUFtQixFQUFFLGtCQUFrQjtFQUN2Q0MsTUFBTSxFQUFFO0FBQ1osQ0FBQztBQUVELE1BQU1DLDBCQUEwQixHQUFHO0VBQy9CQyxRQUFRLEVBQUUsVUFBVTtFQUNwQkMsWUFBWSxFQUFFLGNBQWM7RUFDNUJDLG9CQUFvQixFQUFFLHNCQUFzQjtFQUM1Q0Msa0JBQWtCLEVBQUUsb0JBQW9CO0VBQ3hDQyxTQUFTLEVBQUUsU0FBUztFQUNwQkMsY0FBYyxFQUFFLFVBQVU7RUFDMUJDLGNBQWMsRUFBRSxnQkFBZ0I7RUFDaENDLG1CQUFtQixFQUFFLHFCQUFxQjtFQUMxQ0MsV0FBVyxFQUFFLGFBQWE7RUFDMUJDLGlCQUFpQixF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","map":{"version":3,"names":["path","require","formatBoldYellow","message","contextMethodsToPropertyMapping","getSourceCode","getFilename","getPhysicalFilename","getCwd","contextToSourceCodeMapping","getScope","getAncestors","getDeclaredVariables","markVariableAsUsed","getSource","getSourceLines","getAllComments","getNodeByRangeIndex","getComments","getCommentsBefore","getCommentsAfter","getCommentsInside","getJSDocComment","getFirstToken","getFirstTokens","getLastToken","getLastTokens","getTokenAfter","getTokenBefore","getTokenByRangeStart","getTokens","getTokensAfter","getTokensBefore","getTokensBetween","parserServices","METHODS_WITH_SIGNATURE_CHANGE","Set","getParentObjectMethod","nodePath","node","type","method","parentPath","module","exports","fileInfo","api","j","jscodeshift","root","source","USED_CONTEXT_METHODS","addContextMethodVariableDeclaration","methodName","args","has","find","Property","key","name","replaceWith","createNode","contextMethodDeclaration","variableDeclaration","variableDeclarator","identifier","logicalExpression","memberExpression","callExpression","value","body","unshift","add","CallExpression","callee","object","property","Object","keys","includes","arguments","VariableDeclaration","declarations","id","values","init","filter","remove","console","warn","relative","process","cwd","loc","start","line","column","parentObjectMethodNode","parentObjectMethodParamName","params","conditionalExpression","MemberExpression","forEach","toSource"],"sourceRoot":"/usr/local/google/home/nvitkov/.nvm/versions/node/v22.11.0/lib/node_modules/eslint-transforms/lib/v9-rule-migration/","sources":["v9-rule-migration.js"],"sourcesContent":["/**\n * @fileoverview Transform that migrates an ESLint API from v8 to v9\n * Refer to https://github.com/eslint/eslint-transforms/issues/25 for more information\n *\n * @author Nitin Kumar\n */\n\n\"use strict\";\n\n//------------------------------------------------------------------------------\n// Requirements\n//------------------------------------------------------------------------------\nconst path = require(\"path\");\n\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n\n/**\n * Formats a message string with ANSI escape codes to display it in yellow with bold styling in the terminal.\n * @param {string} message The message to be formatted.\n * @returns {string} The formatted message string.\n */\nfunction formatBoldYellow(message) {\n    return `\\u001b[1m\\u001b[33m${message}\\u001b[39m\\u001b[22m`;\n}\n\nconst contextMethodsToPropertyMapping = {\n    getSourceCode: \"sourceCode\",\n    getFilename: \"filename\",\n    getPhysicalFilename: \"physicalFilename\",\n    getCwd: \"cwd\"\n};\n\nconst contextToSourceCodeMapping = {\n    getScope: \"getScope\",\n    getAncestors: \"getAncestors\",\n    getDeclaredVariables: \"getDeclaredVariables\",\n    markVariableAsUsed: \"markVariableAsUsed\",\n    getSource: \"getText\",\n    getSourceLines: \"getLines\",\n    getAllComments: \"getAllComments\",\n    getNodeByRangeIndex: \"getNodeByRangeIndex\",\n    getComments: \"getComments\",\n    getCommentsBefore: \"getCommentsBefore\",\n    getCommentsAfter: \"getCommentsAfter\",\n    getCommentsInside: \"getCommentsInside\",\n    getJSDocComment: \"getJSDocComment\",\n    getFirstToken: \"getFirstToken\",\n    getFirstTokens: \"getFirstTokens\",\n    getLastToken: \"getLastToken\",\n    getLastTokens: \"getLastTokens\",\n    getTokenAfter: \"getTokenAfter\",\n    getTokenBefore: \"getTokenBefore\",\n    getTokenByRangeStart: \"getTokenByRangeStart\",\n    getTokens: \"getTokens\",\n    getTokensAfter: \"getTokensAfter\",\n    getTokensBefore: \"getTokensBefore\",\n    getTokensBetween: \"getTokensBetween\",\n    parserServices: \"parserServices\"\n};\n\nconst METHODS_WITH_SIGNATURE_CHANGE = new Set([\n    \"getScope\",\n    \"getAncestors\",\n    \"markVariableAsUsed\",\n    \"getDeclaredVariables\"\n]);\n\n/**\n * Returns the parent ObjectMethod node\n * @param {Node} nodePath The nodePath of the current node\n * @returns {Node} The parent ObjectMethod node\n */\nfunction getParentObjectMethod(nodePath) {\n    if (!nodePath) {\n        return null;\n    }\n\n    const node = nodePath.node;\n\n    if (node.type && node.type === \"Property\" && node.method) {\n        return node;\n    }\n\n    return getParentObjectMethod(nodePath.parentPath);\n}\n\n//------------------------------------------------------------------------------\n// Transform Definition\n//------------------------------------------------------------------------------\n\n/**\n * Transforms an ESLint rule from the old format to the new format.\n * @param {Object} fileInfo holds information about the currently processed file.\n * * @param {Object} api holds the jscodeshift API\n * @returns {string} the new source code, after being transformed.\n */\n\nmodule.exports = function(fileInfo, api) {\n    const j = api.jscodeshift;\n    const root = j(fileInfo.source);\n    const USED_CONTEXT_METHODS = new Set();\n\n    /**\n     * Adds a variable declaration for the context method immediately inside the create() method\n     * @param {string} methodName The name of the context method\n     * @param {Array} args The arguments to be passed to the context method\n     * @returns {void}\n     */\n    function addContextMethodVariableDeclaration(methodName, args = []) {\n        if (USED_CONTEXT_METHODS.has(methodName)) {\n            return;\n        }\n\n        root.find(j.Property, {\n            key: { name: \"create\" }\n        }).replaceWith(({ node: createNode }) => {\n            const contextMethodDeclaration = j.variableDeclaration(\"const\", [\n                j.variableDeclarator(\n                    j.identifier(contextMethodsToPropertyMapping[methodName]),\n                    j.logicalExpression(\n                        \"??\",\n                        j.memberExpression(\n                            j.identifier(\"context\"),\n                            j.identifier(\n                                contextMethodsToPropertyMapping[methodName]\n                            )\n                        ),\n                        j.callExpression(\n                            j.memberExpression(\n                                j.identifier(\"context\"),\n                                j.identifier(methodName)\n                            ),\n                            [...args]\n                        )\n                    )\n                )\n            ]);\n\n            // Insert the sourceCodeDeclaration at the beginning of the create() method\n            createNode.value.body.body.unshift(contextMethodDeclaration);\n            USED_CONTEXT_METHODS.add(methodName);\n\n            return createNode;\n        });\n    }\n\n    // Update context methods\n    // context.getSourceCode() -> context.sourceCode ?? context.getSourceCode()\n    root.find(j.CallExpression, {\n        callee: {\n            object: {\n                type: \"Identifier\",\n                name: \"context\"\n            },\n            property: {\n                type: \"Identifier\",\n                name: name =>\n                    Object.keys(contextMethodsToPropertyMapping).includes(name)\n            }\n        }\n    }).replaceWith(({ node }) => {\n        const method = node.callee.property.name;\n        const args = node.arguments;\n\n        addContextMethodVariableDeclaration(method, args);\n\n        // If the method is already declared as a variable in the create() method\n        // Replace all instances of context methods with corresponding variable\n        if (USED_CONTEXT_METHODS.has(method)) {\n            return j.identifier(contextMethodsToPropertyMapping[method]);\n        }\n\n        // Otherwise, create a variable declaration for the method\n        return j.logicalExpression(\n            \"??\",\n            j.memberExpression(\n                j.identifier(\"context\"),\n                j.identifier(contextMethodsToPropertyMapping[method])\n            ),\n            j.callExpression(\n                j.memberExpression(\n                    j.identifier(\"context\"),\n                    j.identifier(method)\n                ),\n                args\n            )\n        );\n    });\n\n    // Remove the variable declarations which have value same as the declaration\n    // const sourceCode = sourceCode -> Remove\n    root.find(j.VariableDeclaration, {\n        declarations: [\n            {\n                type: \"VariableDeclarator\",\n                id: {\n                    type: \"Identifier\",\n                    name: name =>\n                        Object.values(contextMethodsToPropertyMapping).includes(\n                            name\n                        )\n                },\n                init: {\n                    type: \"Identifier\"\n                }\n            }\n        ]\n    })\n        .filter(\n            ({ node }) =>\n                node.declarations[0].id.name === node.declarations[0].init.name\n        )\n        .remove();\n\n    // Move context methods to SourceCode\n    // context.getSource() -> sourceCode.getText()\n    root.find(j.CallExpression, {\n        callee: {\n            type: \"MemberExpression\",\n            object: {\n                type: \"Identifier\",\n                name: \"context\"\n            },\n            property: {\n                type: \"Identifier\",\n                name: name =>\n                    Object.keys(contextToSourceCodeMapping).includes(name)\n            }\n        }\n    }).replaceWith(nodePath => {\n        const node = nodePath.node;\n        const method = node.callee.property.name;\n        const args = node.arguments;\n\n        if (method === \"getComments\") {\n            // eslint-disable-next-line no-console -- This is an intentional warning message\n            console.warn(\n                formatBoldYellow(\n                    `${path.relative(process.cwd(), fileInfo.path)}:${\n                        node.loc.start.line\n                    }:${\n                        node.loc.start.column\n                    } The \"getComments()\" method has been removed. Please use \"getCommentsBefore()\", \"getCommentsAfter()\", or \"getCommentsInside()\" instead. https://eslint.org/docs/latest/use/migrate-to-9.0.0#-removed-sourcecodegetcomments`\n                )\n            );\n            return node;\n        }\n\n        // Add variable declaration for the method if not already added\n        addContextMethodVariableDeclaration(\"getSourceCode\");\n\n        if (METHODS_WITH_SIGNATURE_CHANGE.has(method)) {\n            const parentObjectMethodNode = getParentObjectMethod(nodePath);\n            const parentObjectMethodParamName =\n                parentObjectMethodNode &&\n                parentObjectMethodNode.value.params[0].name;\n\n            // Return the node as is if the method is called with an argument\n            // context.getScope(node) -> sourceCode.getScope  ? sourceCode.getScope(node) : context.getScope();\n            return j.conditionalExpression(\n                j.memberExpression(\n                    j.identifier(\"sourceCode\"),\n                    j.identifier(contextToSourceCodeMapping[method])\n                ),\n                j.callExpression(\n                    j.memberExpression(\n                        j.identifier(\"sourceCode\"),\n                        j.identifier(contextToSourceCodeMapping[method])\n                    ),\n                    parentObjectMethodParamName\n                        ? [...args, j.identifier(parentObjectMethodParamName)]\n                        : args\n                ),\n                j.callExpression(\n                    j.memberExpression(\n                        j.identifier(\"context\"),\n                        j.identifier(method)\n                    ),\n                    []\n                )\n            );\n        }\n\n        node.callee.property.name = contextToSourceCodeMapping[method];\n        node.callee.object.name = \"sourceCode\";\n\n        return node;\n    });\n\n    // Migrate context.parserServices to sourceCode.parserServices\n    root.find(j.MemberExpression, {\n        object: {\n            type: \"Identifier\",\n            name: \"context\"\n        },\n        property: {\n            type: \"Identifier\",\n            name: \"parserServices\"\n        }\n    }).replaceWith(({ node }) => {\n        node.object.name = \"sourceCode\";\n        return node;\n    });\n\n    // Warn for codePath.currentSegments\n    root.find(j.Property, {\n        key: {\n            type: \"Identifier\",\n            name: name =>\n                name === \"onCodePathStart\" || name === \"onCodePathEnd\"\n        }\n    })\n        .find(j.MemberExpression, {\n            property: {\n                type: \"Identifier\",\n                name: \"currentSegments\"\n            }\n        })\n        .forEach(({ node }) => {\n            // eslint-disable-next-line no-console -- This is an intentional warning message\n            console.warn(\n                formatBoldYellow(\n                    `${path.relative(process.cwd(), fileInfo.path)}:${\n                        node.loc.start.line\n                    }:${\n                        node.loc.start.column\n                    } The \"CodePath#currentSegments\" property has been removed and it can't be migrated automatically.\\nPlease read https://eslint.org/blog/2023/09/preparing-custom-rules-eslint-v9/#codepath%23currentsegments for more information.\\n`\n                )\n            );\n        });\n\n    return root.toSource();\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1735836712043}}